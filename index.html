<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>툴비프레임추출기</title>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-title">
                    <h1>툴비프레임추출기</h1>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Left Panel -->
            <div class="panel panel-left">
                <!-- Upload Section -->
                <div class="card" id="uploadCard">
                    <div class="upload-area" id="uploadArea">
                        <i data-lucide="video" class="upload-icon"></i>
                        <p class="upload-text">비디오를 드래그하거나 클릭하여 업로드</p>
                        <input type="file" id="videoInput" accept="video/*" hidden>
                    </div>

                    <!-- URL Input Section -->
                    <div class="url-section">
                        <div class="divider">
                            <span>또는</span>
                        </div>
                        <div class="url-input-group">
                            <input
                                type="text"
                                id="urlInput"
                                class="input"
                                placeholder="비디오 URL을 입력하세요"
                            >
                            <button id="loadUrlBtn" class="btn btn-primary">
                                <i data-lucide="download" class="w-4 h-4"></i>
                                URL 로드
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Video Player -->
                <div class="card" id="videoCard" style="display: none;">
                    <div class="video-container">
                        <video id="videoPlayer" controls></video>
                        <canvas id="frameCanvas" style="display: none;"></canvas>
                    </div>
                </div>

                <!-- Control Panel -->
                <div class="card" id="controlCard" style="display: none;">
                    <!-- Controls Row -->
                    <div class="controls-row">
                        <!-- Extraction Interval -->
                        <div class="control-item">
                            <label class="label-inline">추출 간격</label>
                            <select id="intervalSelect" class="select">
                                <option value="0.1" selected>0.1초</option>
                                <option value="0.5">0.5초</option>
                                <option value="1">1초</option>
                                <option value="2">2초</option>
                            </select>
                        </div>

                        <!-- Image Format -->
                        <div class="control-item">
                            <label class="label-inline">이미지 포맷</label>
                            <select id="formatSelect" class="select">
                                <option value="png" selected>PNG</option>
                                <option value="jpeg">JPG</option>
                                <option value="webp">WebP</option>
                            </select>
                        </div>

                        <!-- Upscaling -->
                        <div class="control-item">
                            <label class="label-inline">업스케일링</label>
                            <select id="scaleSelect" class="select">
                                <option value="1" selected>원본</option>
                                <option value="2">2배</option>
                                <option value="4">4배</option>
                            </select>
                        </div>
                    </div>
                    <p class="text-sm text-muted mt-2">해상도를 증가시켜 더 선명한 이미지 생성</p>

                    <!-- Info Display -->
                    <div class="info-card">
                        <div class="info-row">
                            <span class="text-muted">비디오 길이:</span>
                            <span id="videoDuration">0:00</span>
                        </div>
                        <div class="info-row">
                            <span class="text-muted">예상 프레임 수:</span>
                            <span id="estimatedFrames">0개</span>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="action-buttons">
                        <button id="extractCurrentBtn" class="btn btn-secondary">
                            <i data-lucide="image" class="w-4 h-4"></i>
                            현재 프레임
                        </button>
                        <button id="extractAllBtn" class="btn btn-primary">
                            <i data-lucide="layers" class="w-4 h-4"></i>
                            전체 프레임 추출
                        </button>
                        <button id="resetBtn" class="btn btn-secondary" title="새로고침">
                            <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                            새로고침
                        </button>
                    </div>
                </div>

                <!-- Progress Section -->
                <div class="card" id="progressCard" style="display: none;">
                    <div class="progress-content">
                        <div class="progress-header">
                            <span>추출 중...</span>
                            <span id="progressPercent">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div id="progressFill" class="progress-fill"></div>
                        </div>
                        <div class="progress-info">
                            <span class="text-sm text-muted">
                                <span id="currentFrame">0</span> / <span id="totalFrames">0</span> 프레임
                            </span>
                        </div>
                        <button id="cancelExtractBtn" class="btn btn-secondary mt-4">
                            <i data-lucide="x-circle" class="w-4 h-4"></i>
                            취소
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Panel -->
            <div class="panel panel-right">
                <div class="card h-full">
                    <!-- Gallery Header -->
                    <div class="gallery-header">
                        <h2 class="text-lg font-semibold">
                            추출된 프레임 (<span id="frameCount">0</span>)
                        </h2>
                        <div class="gallery-actions">
                            <button id="selectAllBtn" class="btn btn-ghost btn-sm">
                                <i data-lucide="check-square" class="w-4 h-4"></i>
                                전체 선택
                            </button>
                            <button id="deleteSelectedBtn" class="btn btn-ghost btn-sm">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                                선택 삭제
                            </button>
                            <button id="downloadAllBtn" class="btn btn-secondary btn-sm">
                                <i data-lucide="download" class="w-4 h-4"></i>
                                모두 다운로드
                            </button>
                        </div>
                    </div>

                    <!-- Frame Grid -->
                    <div id="frameGrid" class="frame-grid"></div>

                    <!-- Empty State -->
                    <div id="emptyGallery" class="empty-state">
                        <i data-lucide="image" class="empty-icon"></i>
                        <p class="text-muted">추출된 프레임이 여기에 표시됩니다</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Lightbox Modal -->
    <div id="lightbox" class="lightbox">
        <div class="lightbox-content">
            <button class="lightbox-close" id="lightboxClose">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>
            <div class="lightbox-image-container">
                <img id="lightboxImage" src="" alt="">
                <div class="lightbox-info">
                    <span id="lightboxTime" class="lightbox-time"></span>
                    <div class="lightbox-actions">
                        <button id="lightboxDownload" class="btn btn-secondary btn-sm">
                            <i data-lucide="download" class="w-4 h-4"></i>
                            다운로드
                        </button>
                    </div>
                </div>
            </div>
            <button class="lightbox-nav lightbox-prev" id="lightboxPrev">
                <i data-lucide="chevron-left" class="w-6 h-6"></i>
            </button>
            <button class="lightbox-nav lightbox-next" id="lightboxNext">
                <i data-lucide="chevron-right" class="w-6 h-6"></i>
            </button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="./script.js"></script>
</body>
</html>